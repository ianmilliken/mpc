{{ define "header" }}{{ partial "nav" (dict "context" . "scheme" "reverse") }}{{ end }}

{{ define "main" }}

{{ $Me := . }}

<header class="banner" role="banner">
	<div class="container">
		<div class="banner__inner">
			<h1 class="banner__title">{{ .Title }}</h1>
			<h3 class="banner__intro">{{ .Params.subtitle }}</h3>
			{{ partial "banner_services" (dict "context" .) }}
		</div>
	</div>
</header>

<section class="container">
	{{ range .Params.testimonial }}
	<blockquote class="blockquote">
		<p class="blockquote__body">{{ .quote }}</p>
		<footer class="blockquote__footer">
			<span class="blockquote__client">{{ .client }}</span>, {{ .position }} at <cite>{{ .company }}</cite>
		</footer>
	</blockquote>
	{{ end }}

	{{/* Get the client logo's from the site data */}}
	{{/* Loop through the logo wall list */}}
	{{ if .Params.logo_wall }}
		<div class="logo-wall">
			{{ range .Params.logo_wall }}
				{{ $client := .client }}
				{{/* Access 'clients' collection entries */}}
				{{ with $.Site.GetPage "section" "clients" }}
					{{ range where .Data.Pages "Section" "clients" }}
					{{/* For matching clients, enter it's scope and render some data */}}
						{{ if eq .Title $client }}
							<img src="{{ .Params.logo }}" alt="{{ .Title }}" title="{{ .Title }}"/>
						{{ end }}
					{{ end }}
				{{ end }}
			{{ end }}
		</div>
	{{ end }}
</section>

{{/*
	--
	-- Featured Case Study
	--
	-- */}}

<section class="feature-case-study bg--3">
	<div class="container grid-50">
		{{ $featuredWork := .Params.featured_work }}
		{{ with .Site.GetPage "section" "work" }}
			{{ range where .Data.Pages "Section" "work" }}
				{{ if eq .Title $featuredWork }}
				<div>
					<h4>Featured Case Study</h4>
					<h2>{{ .Title }}</h2>
					<div class="flex">
						{{ range first 2 .Params.results.key_results}}
							<div class="key-result">
								<div class="key-result__primary">{{ .big_text }}</div>
								<div class="key-result__supportive">{{ .supportive_text }}</div>
								<div class="key-result__icon">{{ partial "key_result_icon.svg" . }}</div>
							</div>
						{{ end }}
					</div>
					<a class="button button--outline button--reverse" href="{{ .URL }}">Find out more <i class="icon icon-arrow"></i></a>
				</div>
				{{ if $Me.Params.featured_video }}
					<div class="featured-video">
						<iframe width="560" height="315" src="https://www.youtube.com/embed/{{ .Params.featured_video }}?showinfo=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
					</div>
				{{ else }}
					<div class="featured-image">
						<img src="{{ .Params.thumbnail }}" alt="{{ .Title }}" title={{ .Title }}>
					</div>
				{{ end }}
				{{ end }}
			{{ end }}
		{{ end }}
	</div>
</section>

{{/*
	--
	-- Character Area
	--
	-- */}}

<section>
	<div class="container">
		<div class="content"><h2>{{ .Params.service_picker.title }}</h2></div>
		<p>Are you...</p>
		{{/* Siema carousel starts here */}}
		<div class="siema">
			{{ range .Params.service_picker.picker_slide }}
				<div class="flex flex--justify-between">
					<div class="slide-left">
						<h4>{{ .title }}</h4>
						<p>{{ .info }}</p>
						{{ range .service_list }}
							{{ $service := .service }}
							{{ with $.Site.GetPage "section" "services" }}
								{{ range where .Data.Pages "Section" "services" }}
								{{/* For matching clients, enter it's scope and render some data */}}
									{{ if eq .Title $service }}
										<a href="{{ .URL }}">
											<img src="{{ if .Params.icon }}{{ .Params.icon }}{{ else }}/img/service-icon-default.svg{{ end }}" alt="{{ .Title }}" title="{{ .Title }}" />
											<div>{{ .Title }}</div>
										</a>
									{{ end }}
								{{ end }}
							{{ end }}
						{{ end }}
					</div>
					<div class="slide-right">
						<img src="{{ .image }}" alt="{{ .title }}" />
					</div>
				</div>
			{{ end }}
		</div>
		<div class="siema__controls">
			<button class="siema__prev"><i class="icon icon-arrow-left"></i></button>
			<button class="siema__next"><i class="icon icon-arrow"></i></button>
		</div>
		{{/* Siema carousel ends here */}}
	</div>
</section>

{{ end }}
